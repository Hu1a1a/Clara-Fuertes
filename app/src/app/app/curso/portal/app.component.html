<nav class="navbar bg-body-tertiary"
	style="background-color: #bfd1c9 !important;overflow: none;">
	<div class="container-fluid">
		<div class="navbar-brand titulo"
			data-bs-toggle="offcanvas"
			data-bs-target="#offcanvasNavbar"
			aria-controls="offcanvasNavbar"
			aria-label="Toggle navigation"
			style="cursor: pointer; z-index: 11;">
			Clara Fuertes
		</div>
		<button class="navbar-toggler"
			type="button"
			data-bs-toggle="offcanvas"
			data-bs-target="#offcanvasNavbar"
			aria-controls="offcanvasNavbar"
			aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="offcanvas offcanvas-start"
			tabindex="-1"
			id="offcanvasNavbar"
			aria-labelledby="offcanvasNavbarLabel">
			<div class="offcanvas-header"
				style="padding: 30px 20px 0px 20px;">
				<h5 class="offcanvas-title titulo"
					id="offcanvasNavbarLabel">
					Portal Curso
				</h5>
				<button type="button"
					class="btn-close"
					data-bs-dismiss="offcanvas"
					aria-label="Close"></button>
			</div>
			<div *ngIf="level1"
				class="offcanvas-body"
				style="padding: 0 5px 30px 5px;min-height: 70vh;">
				<div class="list-group list-group-flush border-bottom scrollarea">
					<ng-container *ngFor="let i1 of level1.data;index as i">
						<ng-container *ngIf="i1.active">
							<a
								(click)="clickLevel1();slevel1=slevel1===i1?null:i1;slevel2=null;svideo=null"
								class="list-group-item list-group-item-action py-3 lh-sm level1"
								aria-current="true">
								<div class="d-flex w-100 align-items-center subtitulo">
									<i class="bi bi-brilliance"></i>
									<p>{{i1.Name}}</p>
								</div>
								<div [innerHTML]="i1.Description"
									class="col-12 cuerpo"></div>
							</a>
							<ng-container *ngIf="slevel1===i1">
								<ng-container *ngFor="let i2 of level2.data;index as j">
									<ng-container *ngIf="slevel1.id===i2.level1">
										<a
											(click)="clickLevel2();i2.active?slevel2=slevel2===i2?null:i2:null;svideo=null"
											class="list-group-item list-group-item-action py-3 lh-sm level2"
											aria-current="true">
											<div class="d-flex w-100 align-items-center subtitulo">
												<i *ngIf="!i2.active"
													class="bi bi-lock-fill"></i>
												<i *ngIf="i2.active"
													class="bi bi-folder-fill"></i>
												<p>{{i2.Name}}</p>
											</div>
											<div [innerHTML]="i2.Description"
												class="col-12 cuerpo">
											</div>
										</a>
										<ng-container *ngIf="slevel2===i2">
											<ng-container *ngFor="let v of video.data;index as j">
												<ng-container *ngIf="slevel2.id===v.level2">
													<a [ngClass]="svideo===v?'active':''"
														(click)="v.active?svideo=svideo===v?null:v:null;seeVideo(v)"
														class="list-group-item list-group-item-action video"
														aria-current="true"
														data-bs-dismiss="offcanvas">
														<div class="d-flex w-100 align-items-center subtitulo">
															<i *ngIf="v.active"
																class="bi bi-check-square-fill"
																style="color: greenyellow;"></i>
															<i *ngIf="!v.active"
																class="bi bi-person-video2"></i>
															<p>{{v.Name}}</p>
														</div>
													</a>
												</ng-container>
											</ng-container>
										</ng-container>
									</ng-container>
								</ng-container>
							</ng-container>
						</ng-container>
					</ng-container>
				</div>
			</div>
			<div style="padding: 15px 25px; align-self: center;">
				<button (click)="CerrarSession()"
					class="session">
					Cerrar Sesión
				</button>
			</div>
		</div>
	</div>
</nav>
<div class="row rowx">
	<div class="labex">
		<div *ngIf="level1"
			class="offcanvas-body"
			style="padding: 0;min-height: 70vh;">
			<div class="list-group list-group-flush border-bottom scrollarea">
				<ng-container *ngFor="let i1 of level1.data;index as i">
					<ng-container *ngIf="i1.active">
						<a
							(click)="clickLevel1();slevel1=slevel1===i1?null:i1;slevel2=null;svideo=null"
							class="list-group-item list-group-item-action py-3 lh-sm level1"
							aria-current="true">
							<div class="d-flex w-100 align-items-center subtitulo">
								<i class="bi bi-brilliance"></i>
								<p>{{i1.Name}}</p>
							</div>
							<div [innerHTML]="i1.Description"
								class="col-12 cuerpo"></div>
						</a>
						<ng-container *ngIf="slevel1===i1">
							<ng-container *ngFor="let i2 of level2.data;index as j">
								<ng-container *ngIf="slevel1.id===i2.level1">
									<a
										(click)="clickLevel2();i2.active?slevel2=slevel2===i2?null:i2:null;svideo=null"
										class="list-group-item list-group-item-action py-3 lh-sm level2"
										aria-current="true">
										<div class="d-flex w-100 align-items-center subtitulo">
											<i *ngIf="!i2.active"
												class="bi bi-lock-fill"></i>
											<i *ngIf="i2.active"
												class="bi bi-folder-fill"></i>
											<p>{{i2.Name}}</p>
										</div>
										<div [innerHTML]="i2.Description"
											class="col-12 cuerpo">
										</div>
									</a>
									<ng-container *ngIf="slevel2===i2">
										<ng-container *ngFor="let v of video.data;index as j">
											<ng-container *ngIf="slevel2.id===v.level2">
												<a [ngClass]="svideo===v?'active':''"
													(click)="v.active?svideo=svideo===v?null:v:null;seeVideo(v)"
													class="list-group-item list-group-item-action video"
													aria-current="true"
													data-bs-dismiss="offcanvas">
													<div class="d-flex w-100 align-items-center subtitulo">
														<i *ngIf="v.active"
															class="bi bi-check-square-fill"
															style="color: greenyellow;"></i>
														<i *ngIf="!v.active"
															class="bi bi-person-video2"></i>
														<p>{{v.Name}}</p>
													</div>
												</a>
											</ng-container>
										</ng-container>
									</ng-container>
								</ng-container>
							</ng-container>
						</ng-container>
					</ng-container>
				</ng-container>
			</div>
		</div>
		<div style="padding: 15px 25px; text-align-last: center;">
			<button (click)="CerrarSession()"
				class="session">
				Cerrar Sesión
			</button>
		</div>
	</div>
	<div class="contain"
		style="padding: 25px;">
		<div *ngIf="svideo"
			class="container"
			style="text-align: -webkit-center;">
			<div class="titulo">{{svideo.Name}}</div>
			<div *ngIf="svideo.Src"
				style="max-height: 70vh; width: 85%;height: 600px;border: 2px solid black;">
				<iframe [src]="photoURL(svideo.Src)"
					frameborder="0"
					webkitallowfullscreen
					mozallowfullscreen
					allowfullscreen
					style="height: 100%; width: 100%; max-height: 70vh;"
					[title]="svideo.Name+' - Video'">
				</iframe>
				<br>
			</div>
			<div [innerHTML]="svideo.Description"
				class="cuerpo" style="width: 85%;">
			</div>
			<br>
			<div *ngIf="svideo.Canva"
				style="max-height: 70vh;height: 600px;width: 85%;border: 2px solid black;">
				<iframe [src]="canvaURL(svideo.Canva)"
					loading="lazy"
					style="height: 100%; width: 100%; max-height: 70vh;"
					allowfullscreen="allowfullscreen"
					allow="fullscreen"
					[title]="svideo.Name+' - Canva'">
				</iframe>
				<br>
			</div>
			<div *ngIf="svideo.Adjunt"
				class="row"
				style="margin: 15px;">
				<p style="color: #9ba5af;
            font-size: 14px;">
					Archivos para descargar
				</p>
				<br>
				<ng-container *ngFor="let link of svideo.Adjunt.split(';')">
					<div class="col">
						<a [href]="UrlApi + link"
							[download]="link"
							class="btn"
							target="_blank"
							style="padding: 0;">
							<mat-card style="width: 175px; min-height: 120px; align-items: center;">
								<mat-card-content style="width: 100%;">
									<mat-card-title style="width: 100%;">
										<p style="font-weight: 700;
                                    font-size: 14px;line-height: 15px;">{{link}}</p>
									</mat-card-title>
									<mat-card-subtitle style="width: 100%; color: rgb(231, 76, 60);">
										<p>
											<i class="bi bi-file-earmark-pdf"></i>
											{{link.split(".")[link.split(".").length-1]}}
										</p>
									</mat-card-subtitle>
								</mat-card-content>
							</mat-card>
						</a>
					</div>
				</ng-container>
			</div>
		</div>
		<div *ngIf="!svideo"
			class="container">
			<br>
			<div class="titulo">
				Bienvenido a tu curso personalizado!
			</div>
			<div style="text-align-last: center;">
				<img src="assets/LogoClaraM.jpg" alt="Logo Clara Fuertes Nutrición"
					style="width: 100%;max-width: 300px;">
			</div>
		</div>
	</div>
</div>
